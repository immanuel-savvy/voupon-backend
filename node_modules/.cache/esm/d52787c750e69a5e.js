let express,cors,ds_conn,router,bodyParser,create_default_admin,reset_vendor_id,send_mail;_50e‍.w("express",[["default",["express"],function(v){express=v}]]);_50e‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_50e‍.w("./ds/conn",[["default",["ds_conn"],function(v){ds_conn=v}]]);_50e‍.w("./routes",[["default",["router"],function(v){router=v}]]);_50e‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_50e‍.w("./handlers/starter",[["create_default_admin",["create_default_admin"],function(v){create_default_admin=v}]]);_50e‍.w("./handlers/voucher",[["reset_vendor_id",["reset_vendor_id"],function(v){reset_vendor_id=v}]]);_50e‍.w("./handlers/users",[["send_mail",["send_mail"],function(v){send_mail=v}]]);








const app = express();
app.use(cors());
app.use(express.static(__dirname + "/assets"));
app.use(bodyParser.urlencoded({ extended: true, limit: "100mb" }));
app.use(bodyParser.json({ limit: "100mb" }));

app.use((req, res, next) => {
  if (req.header.vendor_id) {
    req.header.vendor_id = reset_vendor_id(req.header.vendor_id);
    req.body.vendor = req.header.vendor_id;
    _50e‍.g.console.log(req.body.vendor);
  }

  next();
});

router(app);

app.get("/", (req, res) =>
  res.send("<div><h1>Hi, its Voucher Africa.</h1></div>")
);

app.get("/developer", (req, res) => {
  res.sendFile(__dirname + "/assets/docs/index.html");
});

app.listen(1449, () => {
  ds_conn();

  create_default_admin();
  console.log("Voupon Backend started on :1449");
});
